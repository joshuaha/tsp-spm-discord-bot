CREATE TABLE POLL ( 
	ID CHAR(5) PRIMARY KEY, 
	OWNER_ID BIGINT NOT NULL, 
	TEXT VARCHAR(128), 
	OPEN_TIME DATETIME NOT NULL, 
	CLOSE_TIME DATETIME NOT NULL,
	UNIQUE INDEX ID (ID)
);

CREATE TABLE OPTIONS (
	POLL_ID CHAR(5),
	ID TINYINT,
	TEXT VARCHAR(128),
	PRIMARY KEY (POLL_ID, ID),
	FOREIGN KEY (POLL_ID) REFERENCES POLL (ID),
	UNIQUE INDEX ID (POLL_ID, ID)
);

CREATE TABLE VOTES (
	POLL_ID CHAR(5),
	USER_ID BIGINT,
	OPTION_ID TINYINT,
	PRIMARY KEY (USER_ID, POLL_ID),
	FOREIGN KEY (POLL_ID, OPTION_ID) REFERENCES OPTIONS (POLL_ID, ID),
	UNIQUE INDEX ID (POLL_ID, USER_ID)
);
